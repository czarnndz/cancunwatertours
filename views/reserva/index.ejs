<script type="text/javascript">
    var tour = <%- JSON.stringify(tour) %>;
    var hotel = <%- JSON.stringify(hotel) %>;
    var hotels = <%- JSON.stringify(hotels) %>;
</script>
<div ng-controller="reservaCTL">
    <form method="post" id="reserva" name="reserva" >

        <div class="c-container c-container-lg" layout="row" layout="row" layout-align="space-between start" layout-align-md="center center" layout-align-sm="center center">

          <!--LEFT SIDE-->
          <div id="cont-reservacion" flex="70" flex-md="90" flex-sm="100" >

              <!--STEPS BAR-->
              <div id="header-reservacion" layout="row"  ng-click="console.log(step);">
                  <div class="step" ng-click="step = 0" ng-class="step >= 0 ? 'step-on' : ''" flex="33">
                      <span><strong>1.</strong> Tu reservación</span>
                  </div>
                  <div class="step" ng-click="step = terminos ? 1 : 0" ng-class="step >= 1 ? 'step-on' : ''" flex="33" >
                    <span><strong>2.</strong> Datos del viajero</span>
                  </div>
                  <div class="step" ng-click="step = terminos ? 2 : 0" ng-class="step == 2 ? 'step-on' : ''" flex="33" >
                      <span><strong>3.</strong> Pago</span>
                  </div>
              </div>
              <!--END STEPS BAR-->

              <!--RESERVACION STEP 1-->
              <div id="tu-reservacion" class="reservacion-content" ng-class="step == 0 ? 'activar' : 'ng-hide'">

                  <div class="title-block">
                      <h3><i class="icon-transporte"></i> <strong>Tour</strong></h3>
                  </div>
                  <div id="datos-reservacion" layout="row" layout-align="space-between center" layout-wrap>
                      <div id="imagen-reservacion" flex="30" flex-md="35" flex-sm="100" layout="column" layout-align="start center" layout-align-sm="center center">
                          <div class="imagen-reservacion"  ng-style="{ 'background-image' : 'url(' + tour.avatar2 + ')'}"></div>
                      </div>
                      <div class="datos-reservacion" flex="70" flex-md="65" flex-sm="100" layout="column" layout-align="start start" layout-align-sm="start center" >
                          <div class="tours-reservacion">{{tour.name}}</div>
                          <div class="tours-reservacion-2">{{hotel ? "con Transportación" : ""}}</div>
                          <div class="cont-fechas">
                              <div id="fecha-tour" layout="row" layout-align="start center" >
                                  <!--<div class="fecha-tour">Fecha:</div>-->
                                  <md-datepicker ng-model="tour.date" md-min-date="minDate" md-placeholder="Fecha"></md-datepicker>
                              </div>
                              <div id="ubicacion-tour" layout="row" layout-align="start center" ng-if="tour.location">
                                  <i class="icon-pin icono-fecha-r"></i>
                                  <div class="fecha-tour">Ubicación:</div>
                                  <input type="text" class="ubicacion-r" ng-model="tour.location.name" disabled="disabled">
                              </div>
                              <div class="adultos-r" layout="row" layout-align="start center" >
                                  <i class="icon-adultos icono-fecha-r"></i>
                                  <div class="fecha-tour">Adultos:</div>
                                  <input type="number" min-value="1" max-value="8" class="ubicacion-r adultos" ng-model="tour.adults">
                              </div>
                              <div layout="row" layout-align="start center">
                                  <i class="icon-nino icono-fecha-r ninos"></i>
                                  <div class="fecha-tour">Niños:</div>
                                  <input type="number" min-value="0" max-value="8" class="ubicacion-r adultos" ng-model="tour.kids">
                              </div>
                              <div id="fecha-tour" layout="row" layout-align="start center" ng-if="tour.schedules.length > 0">
                                  <i class="icon-horario icono-fecha-r"></i>
                                  <div class="fecha-tour">Horario:</div>
                                  <md-select class="custom-select" ng-model="tour.schedule" ng-required name="schedule">
                                      <md-option value="{{schedule}}" ng-repeat="schedule in tour.schedules" ng-selected="$index == 0">from {{schedule.from | date:'HH:mm'}} to {{schedule.to | date:'HH:mm'}}</md-option>
                                  </md-select>
                              </div>
                          </div>
                      </div>
                  </div>

                  <div class="title-block">
                      <h3><i class="icon-transporte"></i> <strong>Transportación</strong></h3>
                  </div>

                  <div id="hotel-reservacion" layout="column" layout-align="space-between center">
                      <div class="hotel-reservacion" layout="row" layout-align="space-between center" layout-wrap>
                          <div flex="60" flex-md="100" flex-sm="100" layout="row" layout-align="start center" layout-align-sm="center center" layout-align-md="center center" layout-wrap >
                              <p class="no-margin"><i class="icon-pin"></i>Hotel : </p>

                              <md-autocomplete
                                  class="custom-autocomplete hotel-autocomplete"
                                  ng-disabled="isDisabled"
                                  md-no-cache="false"
                                  md-selected-item="hotel"
                                  md-search-text="searchText"
                                  md-items="item in hotels|filter:{name : searchText}:false"
                                  md-item-text="item.name"
                                  md-min-length="0"
                                  placeholder="">
                                <md-item-template>
                                  <span md-highlight-text="searchText" md-highlight-flags="^i">{{item.name}}</span>
                                </md-item-template>
                                <md-not-found>
                                  No matches found for "{{searchText}}".
                                </md-not-found>
                            </md-autocomplete>
                          </div>
                          <div flex="40" flex-md="100" flex-sm="100" layout="row" layout-align="space-around center" >
                              <md-button class="md-raised" ng-class="!isDisabled ? 'md-primary' : ''" ng-click="isDisabled = false">Editar</md-button>
                          </div>
                          <div id="total-transporte" flex="100" layout="column" layout-align="center start" layout-align-sm="center center">
                              <p><strong>Total Transporte</strong></p>
                              <p class="highlight"><strong class="big-price"> {{priceTransfer() | currency}} </strong> mxn</p>
                              <p>El importe incluye todos los impuestos</p>
                          </div>
                      </div>
                  </div>
                  <div id="hotel-reservacion" layout="row" layout-align="center center" layout-padding>
                    <md-checkbox class="md-primary" ng-model="terminos" aria-label="Terminos">
                      He leído y acepto los <a href=""> Términos y Condiciones de uso </a> y el <a href=""> Aviso de privacidad </a>
                    </md-checkbox>
                  </div>
              </div>
              <!--END STEP 1-->

              <!--STEP 2-->
              <div id="datos-viajero" class="reservacion-content" ng-class="step == 1 ? 'activar' : 'ng-hide'">

                <div class="block-content">
                  <p>
                    <i class="icon-transporte icono-trans-d"></i>
                     <strong>Datos para el traslado de tu Tour (Opcional)</strong>
                  </p>
                  <input flex="50" flex-sm="100" type="text" class="ubicacion-r datos-viajero" >
                </div>

                <div class="block-content" id="datos-viajero-2">
                      <p><strong>Datos para tu reservación</strong></p>
                      <p>Estos datos son los que se utilizarán para hacerte llegar información de su reservación</p>
                      <div id="info-datos" flex="90">
                          <div layout="row" layout-align="space-between center">
                            <div class="form-datos" flex="45" layout="row" flex-sm="100" layout-align="center center" >
                                <div flex="15" layout="row" layout-align="center center" ><i class="icon-nombre icono-datos-v"></i></div>
                                <input flex="85"  type="text" class="input-datos" placeholder="Nombre" ng-model="tour.client.name" name="nombre" ng-required>
                            </div>
                            <div class="form-datos" flex="45" layout="row" flex-sm="100" layout-align="center center" >
                                <div flex="15" layout="row" layout-align="center center" ><i class="icon-nombre icono-datos-v"></i></div>
                                <input flex="85" type="text" class="input-datos" placeholder="Apellidos" ng-model="tour.client.last_name" name="apellido"  ng-required>
                            </div>
                          </div>
                          <div layout="row" layout-align="space-between center">
                            <div class="form-datos" flex="45" layout="row" flex-sm="100" layout-align="center center" >
                                <div flex="15" layout="row" layout-align="center center" ><i class="icon-mail icono-datos-v"></i></div>
                                <input flex="85"  type="email" class="input-datos" placeholder="Correo Electrónico" ng-model="tour.client.email" name="email" ng-required>
                            </div>
                            <div class="form-datos" flex="45" layout="row" flex-sm="100" layout-align="center center" >
                                <div flex="15" layout="row" layout-align="center center" ><i class="icon-mail icono-datos-v"></i></div>
                                <input flex="85"  type="email" class="input-datos" placeholder="Confirmar Correo Electrónico" name="repeat_email" ng-model="repeat_email">
                            </div>
                          </div>

                          <p class="tel-label">Número Telefónico</p>

                          <div layout="row" layout-align="space-between center">
                            <div class="form-datos" flex="45" layout="row" flex-sm="100" layout-align="center center" >
                                <input flex="100"  type="text" class="input-datos" placeholder="Lada" ng-model="tour.client.phone_lada">
                            </div>
                            <div class="form-datos" flex="45" layout="row" flex-sm="100" layout-align="center center" >
                                <div flex="15" layout="row" layout-align="center center" ><i class="icon-tel icono-datos-v"></i></div>
                                <input flex="65"  type="text" class="input-datos" placeholder="Número" ng-model="tour.client.phone">
                                <div class="celular" flex="20" layout="row" layout-align="space-around center" >
                                <md-checkbox md-no-ink aria-label="Celular" ng-model="tour.client.isMobile" class="md-primary">
                                  Celular
                                </md-checkbox>
                                </div>
                            </div>
                          </div>

                      </div>
                  </div>
              </div>

              <div id="pago-reservacion" class="reservacion-content" ng-class="step == 2 ? 'activar' : 'ng-hide'">
                  <div class="title-block">
                      <h3><strong>FORMA DE PAGO</strong></h3>
                  </div>
                  <div id="forma-pago" class="block-content">

                      <md-radio-group class="md-primary" ng-model="paymentMethod" layout="row">
                        <md-radio-button value="Visa" class="md-primary">
                          <img src="images/visa.png" class="img-tarjeta">
                        </md-radio-button>
                        <md-radio-button value="Master" class="md-primary">
                          <img src="images/master.png" class="img-tarjeta">
                        </md-radio-button>
                        <md-radio-button value="American" class="md-primary">
                          <img src="images/american.png" class="img-tarjeta">
                        </md-radio-button>
                        <md-radio-button value="Puntos" class="md-primary">
                          <img src="images/puntos.png" class="img-tarjeta">
                        </md-radio-button>
                        <md-radio-button value="Oxxo" class="md-primary">
                          <img src="images/oxxo.png" class="img-tarjeta">
                        </md-radio-button>
                        <md-radio-button value="Paypal" class="md-primary">
                          <img src="images/paypal.png" class="img-tarjeta">
                        </md-radio-button>
                      </md-radio-group>

                      <p>Elije un banco</p>

                      <md-select class="custom-select" ng-model="someVal">
                          <md-option value="1">Bancomer <img src="images/bancomer.png"></md-option>
                      </md-select>

                  </div>

                  <div class="title-block">
                      <h3><strong>DATOS DEL PAGO</strong></h3>
                  </div>

                  <div id="datos-del-pago" class="block-content">

                      <div flex="90" layout="row" layout-align="start center" layout-align-md="center center" layout-align-sm="center center">
                          <img src="images/visa.png" class="datos-img">
                      </div>

                      <p>Datos del pago</p>
                      <p>País</p>

                      <md-select flex="60" class="custom-select" ng-model="someVal">
                          <md-option value="1">Estados Unidos</md-option>
                          <md-option value="2">Canada</md-option>
                          <md-option value="3">España</md-option>
                      </md-select>

                      <div id="Pais" flex="90" flex-lg="100" layout="row" layout-align="start center" layout-align-sm="center center" layout-align-md="center center" layout-wrap>
                          <div flex flex-md="100" flex-sm="100" layout="row" layout-align="start start" class="c-uno" layout-wrap>
                              <input type="text" flex-md="100" flex-sm="100" class="input-num-tarjeta" placeholder="Número de Tarjeta">
                              <input type="text" flex-md="100" flex-sm="100" class="input-num-tarjeta" placeholder="Nombre del titular de la tarjeta">
                          </div>
                          <div flex flex-md="100" flex-sm="100" layout="row" layout-align="start start" class="c-dos" layout-wrap>
                              <div class="text-datos-trans info fecha" layout="row" layout-align="start center" flex="100" >
                                  <div> Fecha de vencimiento </div>
                              </div>
                              <div class="fecha-slect" layout="column" layout-align="center center" flex-md="100" flex-sm="100">
                                  <md-select class="select-mes custom-select" ng-model="someVal" placeholder="Més">
                                      <md-option value="1">1</md-option>
                                      <md-option value="2">2</md-option>
                                      <md-option value="3">3</md-option>
                                      <md-option value="4">4</md-option>
                                      <md-option value="5">5</md-option>
                                      <md-option value="6">6</md-option>
                                      <md-option value="7">7</md-option>
                                      <md-option value="8">8</md-option>
                                      <md-option value="9">9</md-option>
                                      <md-option value="10">10</md-option>
                                      <md-option value="11">11</md-option>
                                      <md-option value="12">12</md-option>
                                  </md-select>
                              </div>
                              <div class="fecha-slect" layout="column" layout-align="center center" flex-md="100" flex-md="100" flex-sm="100">
                                  <md-select class="select-mes custom-select" ng-model="someVal" placeholder="Año">
                                      <md-option value="1">2015</md-option>
                                      <md-option value="2">2016</md-option>
                                      <md-option value="3">2017</md-option>
                                  </md-select>
                              </div>
                              <input type="text" flex-md="100" flex-sm="100" class="input-num-tarjeta seguridad" placeholder="Código de seguridad">
                              <div class="pregunta-pago" layout="row" layout-align="center center" >?</div>
                          </div>
                      </div>
                      <div class="text-datos-trans info estado" layout="row" layout-align-sm="center center" layout-align-md="center center" flex="90" >Estado</div>
                      <div id="estado" layout="row" layout-align="start center" layout-align-sm="center center" layout-align-md="center center" flex="90" layout-wrap>
                          <div layout="column" layout-align="center center" flex="40" flex-md="100" flex-sm="100" placeholder="Seleccionar">
                              <md-select class="select-estado" ng-model="someVal">
                                  <md-option value="1">Sinaloa</md-option>
                                  <md-option value="2">Monterrey</md-option>
                                  <md-option value="3">D.F</md-option>
                              </md-select>
                          </div>
                          <input type="text" flex-md="100" flex-sm="100" class="input-num-tarjeta ciudad" placeholder="Ciudad">
                          <input type="text" flex="40" flex-md="100" flex-sm="100" class="input-num-tarjeta direccion" placeholder="Dirección">
                          <input type="text" flex-md="100" flex-sm="100" class="input-num-tarjeta ciudad codigo" placeholder="Código Postal">
                      </div>
                      <div id="terminos-condiciones-pago">
                          <p>
                            <md-checkbox class="md-primary" ng-model="terminosVisibility" aria-label="Terminos">
                              He leído y acepto los <a href=""> Términos y Condiciones de uso </a> y el <a href=""> Aviso de privacidad </a>
                            </md-checkbox>
                          </p>
                          <p class="total-pagar"><strong>Total a Pagar</strong></p>
                          <p class="precio-total">MXM <strong>$ 20,793.00</strong></p>
                          <div class="importe-pago" flex="100" layout="row" layout-align="center center">El importe incluye todos los impuestos</div>

                          <input type="button" id="boton-pagar" value="PAGAR RESERVA">

                      </div>
                  </div>
              </div>

              <div class="block-content">
                <md-button ng-disabled="isNextButtonDisabled()" class="md-raised md-primary" ng-click="continueClick()"><span class="activar">CONTINUAR</span></md-button>
              </div>

          </div>
          <!--END LEFT SIDE-->

          <!--RIGHT SIDE-->
          <div id="detalle-reservacion" flex="25" flex-md="90" flex-sm="100" layout="row" layot-align="start start" layout-wrap>
              <div class="head-detalle" flex="100" layout="row" layout-align="center center" >Tu reservación</div>
              <div id="nombre-detalles" flex="100" layout="row" layout-align="center center" layout-wrap >
                  <div class="nombre-detalle" flex="80" layout="column" layout-align="center start" layout-align-md="center center" layout-align-sm="center center" >
                      <div class="nombre-d">{{tour.name}}</div>
                      <a href="" class="ver-detalles">ver detalles</a>
                      <div class="precio-detalles margen">MXN {{priceTour() | currency}}</div>
                      <div class="ver-detalles" ng-if="hotel">TRANSPORTACIÓN</div>
                      <div class="precio-detalles" ng-if="hotel">MXN {{priceTransfer() | currency}}</div>
                      <div class="ver-detalles">IMPUESTOS</div>
                      <div class="precio-detalles">MXN {{priceTax() | currency}}</div>
                  </div>
              </div>
              <div id="precio-detalles"  flex="100" layout="row" layout-align="center center" layout-wrap >
                  <div class="total-detalles" flex="80" layout="column" layout-align="center start" layout-align-md="center center" layout-align-sm="center center"  >
                      <div class="text-total-d">TOTAL</div>
                      <div class="precio-total-d">MXN {{priceTotal() | currency}}</div>
                  </div>
              </div>
          </div>
          <!--END RIGHT SIDE-->

        </div>
    </form>
</div>
