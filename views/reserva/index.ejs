<script type="text/javascript">
    var tour = <%- JSON.stringify(tour) %>;
    var hotel = <%- JSON.stringify(hotel) %>;
    var hotels = <%- JSON.stringify(hotels) %>;
</script>
<div ng-controller="reservaCTL">
    <form method="post" id="reserva" name="reserva" >

        <div
          class="c-container c-container-xlg reserva-wrap"
          layout="row"
          layout-md="column"
          layout-sm="column"
          layout-align="space-between start"
          layout-align-md="center center"
          layout-align-sm="center center">

          <!--LEFT SIDE-->
          <div id="cont-reservacion" flex="70" flex-md="100" flex-sm="100" >

              <!--STEPS BAR-->
              <div id="header-reservacion" layout="row"   ng-click="console.log(step);">
                  <div class="step" ng-click="step = 0" ng-class="step >= 0 ? 'step-on' : ''" flex="33">
                      <span><strong>1.</strong> Tu reservación</span>
                  </div>
                  <div class="step" ng-click="step = terminos ? 1 : 0" ng-class="step >= 1 ? 'step-on' : ''" flex="33" >
                    <span><strong>2.</strong> Datos del viajero</span>
                  </div>
                  <div class="step" ng-click="step = terminos ? 2 : 0" ng-class="step == 2 ? 'step-on' : ''" flex="33" >
                      <span><strong>3.</strong> Pago</span>
                  </div>
              </div>
              <!--END STEPS BAR-->

              <!--RESERVACION STEP 1-->
              <div id="tu-reservacion" class="reservacion-content" ng-class="step == 0 ? 'activar' : 'ng-hide'">

                  <div class="title-block">
                      <h3><i class="icon-transporte"></i> <strong>Tour</strong></h3>
                  </div>
                  <div id="datos-reservacion" class="block-content" layout="row" layout-align="space-between center" layout-wrap>
                      <div id="imagen-reservacion" flex="30" flex-md="35" flex-sm="100" layout="column" layout-align="start center" layout-align-sm="center center">
                          <div class="imagen-reservacion"  ng-style="{ 'background-image' : 'url(' + tour.avatar2 + ')'}"></div>
                      </div>
                      <div class="datos-reservacion" flex="70" flex-md="65" flex-sm="100" >
                          <h3>{{tour.name}}</h3>
                          <div class="tours-reservacion-2">{{hotel ? "con Transportación" : ""}}</div>
                          <section>
                              <div class="input-field-wrap" layout="row" layout-align="space-between center" >
                                  <label flex="20"><i class="icon-calendario icono-fecha-r"></i> Fecha:</label>
                                  <div flex="75">
                                    <md-datepicker flex="75" ng-model="tour.date" md-min-date="minDate" md-placeholder="Fecha"></md-datepicker>
                                  </div>
                              </div>
                              <div class="input-field-wrap" layout="row" layout-align="space-between center" ng-if="tour.location">
                                  <label flex="20"><i class="icon-pin icono-fecha-r"></i> Ubicación:</label>
                                  <div flex="75">
                                    <input type="text" ng-model="tour.location.name" disabled="disabled">
                                  </div>
                              </div>
                              <div class="input-field-wrap" layout="row" layout-align="space-between center" >
                                  <label flex="20"><i class="icon-adultos icono-fecha-r"></i> Adultos:</label>
                                  <div flex="75">
                                    <input type="number" min-value="1" max-value="8" ng-model="tour.adults">
                                  </div>
                              </div>
                              <div class="input-field-wrap" layout="row" layout-align="space-between center">
                                  <label flex="20"><i class="icon-nino icono-fecha-r ninos"></i> Niños:</label>
                                  <div flex="75">
                                    <input type="number" min-value="0" max-value="8" ng-model="tour.kids">
                                  </div>
                              </div>
                              <div class="input-field-wrap" layout="row" layout-align="space-between center" ng-if="tour.schedules.length > 0">
                                  <label flex="20"><i class="icon-horario icono-fecha-r"></i> Horario:</label>
                                  <div flex="75">
                                    <md-select class="custom-select" ng-model="tour.schedule" ng-required name="schedule">
                                        <md-option value="{{schedule}}" ng-repeat="schedule in tour.schedules" ng-selected="$index == 0">from {{schedule.from | date:'HH:mm'}} to {{schedule.to | date:'HH:mm'}}</md-option>
                                    </md-select>
                                  </div>
                              </div>
                          </section>
                      </div>
                  </div>

                  <div class="title-block">
                      <h3><i class="icon-transporte"></i> <strong>Transportación</strong></h3>
                  </div>

                  <div class="block-content" layout="column" layout-align="space-between center">
                      <div class="hotel-reservacion" layout="row" layout-align="space-between center" layout-wrap>
                          <div flex="60" flex-md="100" flex-sm="100" layout="row" layout-align="start center" layout-align-sm="center center" layout-align-md="center center" layout-wrap >
                              <p class="no-margin"><i class="icon-pin"></i>Hotel : </p>

                            <md-autocomplete
                              class="custom-autocomplete hotel-autocomplete"
                              ng-disabled="isDisabled"
                              md-no-cache="false"
                              md-selected-item="hotel"
                              md-search-text="searchText"
                              md-items="item in hotels|filter:{name : searchText}:false"
                              md-item-text="item.name"
                              md-min-length="0"
                              placeholder="">
                                <md-item-template>
                                  <span md-highlight-text="searchText" md-highlight-flags="^i">{{item.name}}</span>
                                </md-item-template>
                                <md-not-found>
                                  No matches found for "{{searchText}}".
                                </md-not-found>
                            </md-autocomplete>
                          </div>
                          <div flex="40" flex-md="100" flex-sm="100" layout="row" layout-align="space-around center" >
                              <md-button class="md-raised" ng-class="!isDisabled ? 'md-primary' : ''" ng-click="isDisabled = false">Editar</md-button>
                          </div>
                          <div class="total-transporte" id="total-transporte" flex="100" layout="column" layout-align="center start" layout-align-sm="center center">
                              <p><strong>Total Transporte</strong></p>
                              <p class="highlight"><strong class="big-price"> {{priceTransfer() | currency}} </strong> mxn</p>
                              <p>El importe incluye todos los impuestos</p>
                          </div>
                      </div>
                  </div>
                  <div class="block-content">
                    <p class="terms-text">
                      <md-checkbox class="md-primary" ng-model="terminos" aria-label="Terminos">
                        He leído y acepto los <a href=""> Términos y Condiciones de uso </a> y el <a href=""> Aviso de privacidad </a>
                      </md-checkbox>
                    </p>
                  </div>
              </div>
              <!--END STEP 1-->

              <!--STEP 2-->
              <div id="datos-viajero" class="reservacion-content" ng-class="step == 1 ? 'activar' : 'ng-hide'">

                <div class="title-block datos-reservacion">
                  <h3>
                    <i class="icon-transporte icono-trans-d"></i>
                     <strong>Datos para el traslado de tu Tour (Opcional)</strong>
                  </h3>
                  <input flex="50" flex-sm="100" type="text" >
                </div>

                <div class="block-content" id="datos-viajero-2">
                      <p><strong>Datos para tu reservación</strong></p>
                      <p>Estos datos son los que se utilizarán para hacerte llegar información de su reservación</p>
                      <div class="datos-reservacion" flex="90">

                          <div class="input-field-wrap" layout="row" layout-sm="column" layout-align="space-between start">
                            <input flex="45" flex-sm="100"  type="text" class="input-field" placeholder="Nombre" ng-model="tour.client.name" name="nombre" ng-required>
                            <input flex="45" flex-sm="100" type="text" class="input-field" placeholder="Apellidos" ng-model="tour.client.last_name" name="apellido"  ng-required>
                          </div>

                          <div class="input-field-wrap" layout="row" layout-sm="column" layout-align="space-between center">
                            <input flex="45" flex-sm="100"  type="email" class="input-field" placeholder="Correo Electrónico" ng-model="tour.client.email" name="email" ng-required>
                            <input flex="45" flex-sm="100"  type="email" class="input-field" placeholder="Confirmar Correo Electrónico" name="repeat_email" ng-model="repeat_email">
                          </div>

                          <p class="tel-label no-margin">Número Telefónico</p>

                          <div layout="row" layout-sm="column" layout-align="space-between center">
                            <div class="input-field-wrap" flex="45" flex-sm="100">
                                <input flex="100" class="input-field" type="text" placeholder="Lada" ng-model="tour.client.phone_lada">
                            </div>
                            <div class="input-field-wrap" flex="45" flex-sm="100" layout="row" layout-sm="column" flex-sm="100" layout-align="start center" >
                                <input flex="65" flex-sm="100"  type="text" class="input-field" placeholder="Número" ng-model="tour.client.phone">

                                <div class="celular" flex="20" flex-sm="100" layout="row" layout-align="space-around center" >
                                  <md-checkbox md-no-ink aria-label="Celular" ng-model="tour.client.isMobile" class="md-primary">
                                    Celular
                                  </md-checkbox>
                                </div>
                            </div>
                          </div>

                      </div>
                  </div>
              </div>
              <!--END STEP 2-->

              <!--STEP 3-->
              <div id="pago-reservacion" class="reservacion-content" ng-class="step == 2 ? 'activar' : 'ng-hide'">
                  <div class="title-block">
                      <h3><strong>FORMA DE PAGO</strong></h3>
                  </div>
                  <div id="forma-pago" class="block-content">

                      <md-radio-group class="md-primary" ng-model="paymentMethod" layout="row" layout-md="column" layout-sm="column">
                        <md-radio-button flex-md="100" flex-sm="100" value="Visa" class="md-primary">
                          <img src="/images/visa.png" class="img-tarjeta">
                        </md-radio-button>
                        <md-radio-button flex-md="100" flex-sm="100" value="Master" class="md-primary">
                          <img src="/images/master.png" class="img-tarjeta">
                        </md-radio-button>
                        <md-radio-button flex-md="100" flex-sm="100" value="American" class="md-primary">
                          <img src="/images/american.png" class="img-tarjeta">
                        </md-radio-button>
                        <md-radio-button flex-md="100" flex-sm="100" value="Puntos" class="md-primary">
                          <img src="/images/puntos.png" class="img-tarjeta">
                        </md-radio-button>
                        <md-radio-button flex-md="100" flex-sm="100" value="Oxxo" class="md-primary">
                          <img src="/images/oxxo.png" class="img-tarjeta">
                        </md-radio-button>
                        <md-radio-button flex-md="100" flex-sm="100" value="Paypal" class="md-primary">
                          <img src="/images/paypal.png" class="img-tarjeta">
                        </md-radio-button>
                      </md-radio-group>

                      <p>Elije un banco</p>

                      <md-select class="custom-select no-margin" ng-model="someVal" placeholder>
                          <md-option value="1">Bancomer <img src="/images/bancomer.png"></md-option>
                      </md-select>

                  </div>

                  <div class="title-block">
                      <h3><strong>DATOS DEL PAGO</strong></h3>
                  </div>

                  <div id="datos-del-pago" class="block-content">
                      <p>
                          <img src="/images/visa.png" class="datos-img">
                      </p>

                      <p><strong>Datos del pago</strong></p>
                      <p class="no-margin">País</p>

                      <md-select class="custom-select no-margin" ng-model="someVal">
                          <md-option value="1">Estados Unidos</md-option>
                          <md-option value="2">Canada</md-option>
                          <md-option value="3">España</md-option>
                      </md-select>

                      <div class="datos-reservacion">

                        <div class="input-field-wrap" layout="row" layout-sm="column" layout-align="space-between end">
                          <div flex="45" flex-sm="100" class="input-field-wrap">
                              <input type="text" class="input-field" placeholder="Número de Tarjeta">
                          </div>
                          <div flex="45" flex-sm="100" class="input-field-wrap">
                            <p class="no-margin">Fecha de vencimiento</p>
                            <div layout="row" layout-align="space-between center">
                              <div flex="45">
                                <md-select class="custom-select no-margin" ng-model="someVal" placeholder="Més">
                                    <md-option value="1">1</md-option>
                                    <md-option value="2">2</md-option>
                                    <md-option value="3">3</md-option>
                                    <md-option value="4">4</md-option>
                                    <md-option value="5">5</md-option>
                                    <md-option value="6">6</md-option>
                                    <md-option value="7">7</md-option>
                                    <md-option value="8">8</md-option>
                                    <md-option value="9">9</md-option>
                                    <md-option value="10">10</md-option>
                                    <md-option value="11">11</md-option>
                                    <md-option value="12">12</md-option>
                                </md-select>
                              </div>
                              <div flex="45">
                                <md-select class="custom-select" ng-model="someVal" placeholder="Año">
                                    <md-option value="1">2015</md-option>
                                    <md-option value="2">2016</md-option>
                                    <md-option value="3">2017</md-option>
                                </md-select>
                              </div>
                            </div>
                          </div>
                        </div>

                        <div class="input-field-wrap" layout="row" layout-sm="column" layout-align="space-between end" layout-align-sm="space-between center">
                          <div class="input-field-wrap-inner" flex="45" flex-sm="100">
                            <input type="text" class="input-field" placeholder="Nombre del titular de la tarjeta">
                          </div>
                          <div class="input-field-wrap-inner" flex="45" flex-sm="100">
                            <input type="text" class="input-field" placeholder="Código de seguridad">
                          </div>
                        </div>

                      </div>

                      <div class="datos-reservacion">

                        <div class="input-field-wrap" layout="row" layout-sm="column" layout-align="space-between end" layout-align-sm="space-between center">
                          <div class="input-field-wrap-inner" flex="45" flex-sm="100">
                            <p>Estado</p>
                            <md-select class="custom-select custom-select-full no-margin" ng-model="someVal">
                                <md-option value="1">Sinaloa</md-option>
                                <md-option value="2">Monterrey</md-option>
                                <md-option value="3">D.F</md-option>
                            </md-select>
                          </div>
                          <div class="input-field-wrap-inner" flex="45" flex-sm="100">
                            <input type="text" class="input-field" placeholder="Ciudad">
                          </div>
                        </div>

                        <div class="input-field-wrap" layout="row" layout-sm="column" layout-align="space-between end" layout-align-sm="space-between center">
                          <div class="input-field-wrap-inner" flex="45" flex-sm="100">
                            <input type="text" class="input-field" placeholder="Dirección">
                          </div>
                          <div class="input-field-wrap-inner" flex="45" flex-sm="100">
                            <input type="text" class="input-field" placeholder="Código Postal">
                          </div>
                        </div>

                      </div>

                      <div id="terminos-condiciones-pago">
                          <p class="terms-text">
                            <md-checkbox class="md-primary" ng-model="terminosVisibility" aria-label="Terminos">
                              He leído y acepto los <a href=""> Términos y Condiciones de uso </a> y el <a href=""> Aviso de privacidad </a>
                            </md-checkbox>
                          </p>
                          <p class="total-pagar"><strong>Total a Pagar</strong></p>
                          <p class="precio-total">MXM <strong>$ 20,793.00</strong></p>
                          <div class="importe-pago" flex="100" layout="row" layout-align="center center">El importe incluye todos los impuestos</div>

                          <!--<input type="button" id="boton-pagar" value="PAGAR RESERVA">-->
                          <input type="button" class="action-btn" id="boton-pagar" value="PAGAR RESERVA">
                      </div>
                  </div>
              </div>
              <!--END STEP 3-->

              <div class="block-content block-content-transparent">
                <a href="" ng-click="continueClick()" class="action-btn continue-btn">CONTINUAR</a>
                <div class="clear"></div>
              </div>

          </div>
          <!--END LEFT SIDE-->

          <!--RIGHT SIDE-->
          <div class="reserva-info" flex="25" flex-md="100" flex-sm="100">
            <div class="reserva-info-inner">
              <h2>Tu reservación</h2>
              <section class="reserva-info-block">
                <h3>{{tour.name}}</h3>
                <p><a class="see-details" ng-href="/detalle/{{tour.id}}" target="_blank">ver detalles</a></p>
                <p class="precio-detalles">MXN {{priceTour() | currency}}</p>
              </section>
              <section class="reserva-info-block">
                <p  ng-if="hotel"><strong>TRANSPORTACIÓN</strong></p>
                <p class="precio-detalles" ng-if="hotel">MXN {{priceTransfer() | currency}}</p>
              </section>
              <section class="reserva-info-block">
                <p><strong>IMPUESTOS</strong></p>
                <p class="precio-detalles">MXN {{priceTax() | currency}}</p>
              </section>
            </div>
            <div class="reserva-info-inner">
              <section class="reserva-info-block">
                <p class="text-total-d"><strong>TOTAL</strong></p>
                <p class="precio-total-d">MXN {{priceTotal() | currency}}</p>
              </section>
            </div>
          </div>
          <!--END RIGHT SIDE-->

        </div>
    </form>
</div>
